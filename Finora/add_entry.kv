<AddEntryScreen>:
    name: "add_entry"
    MDScreen:
        MDTopAppBar:
            id: top_app_bar
            title: "Add Entry"
            #md_bg_color: app.theme_cls.primary_color
            specific_text_color: app.theme_cls.accent_color
            pos_hint: {"top": 1}
            left_action_items: [["arrow-left", lambda x: root.home_button()]]

        MDScrollView:
            pos_hint: {"top": 0.9}
            MDList:
                id: md_list
                padding: dp(10)
                spacing: dp(10)
                MDTextField:
                    id: person_name
                    hint_text: "Person Name"
                    helper_text: "Enter the Person's Name"
                    helper_text_mode: "on_focus"
                    icon_right: "account"
                    input_type: "text"
                    input_filter: root.name_filter
                    size_hint_x: 0.8
                    pos_hint: {"center_x": 0.5}
                    on_text: root.toggle_opacity(self)
                    on_focus:
                        root.show_options()
                        root.toggle_opacity(self)
                MDTextField:
                    id: branch_name
                    hint_text: "Branch Name"
                    helper_text: "Enter the branch name"
                    helper_text_mode: "on_focus"
                    icon_right: "account"
                    input_type: "text"
                    input_filter: root.name_filter
                    size_hint_x: 0.8
                    pos_hint: {"center_x": 0.5}
                    on_text: root.toggle_opacity(self)
                    on_focus:
                        root.show_options()
                        root.toggle_opacity(self)
                MDTextField:
                    id: transaction_date
                    hint_text: "Transaction Date"
                    helper_text: "Enter the transaction date"
                    helper_text_mode: "on_focus"
                    icon_right: "calendar"
                    input_type: "null"
                    input_filter: "date"
                    size_hint_x: 0.8
                    pos_hint: {"center_x": 0.5}
                    readonly: True
                    on_text: root.toggle_opacity(self)
                    on_touch_down:
                        # args[1] is the touch
                        root.show_date_picker() if self.collide_point(*args[1].pos) else None; 
                        root.show_options() if self.collide_point(*args[1].pos) else None; 
                        root.toggle_opacity(self) if self.collide_point(*args[1].pos) else None
                MDTextField:
                    id: amount
                    hint_text: "Amount"
                    helper_text: "Enter the amount"
                    helper_text_mode: "on_focus"
                    icon_right: "currency-inr"
                    input_type: "number"
                    input_filter: "float"
                    size_hint_x: 0.8
                    pos_hint: {"center_x": 0.5}
                    on_text: root.toggle_opacity(self)
                    on_focus:
                        root.show_options()
                        root.toggle_opacity(self)
                MDTextField:
                    id: transaction_type
                    hint_text: "Transaction Type"
                    helper_text: "Enter the transaction type"
                    helper_text_mode: "on_focus"
                    input_type: "null"
                    input_filter: root.type_filter
                    icon_right: "swap-horizontal"
                    size_hint_x: 0.8
                    pos_hint: {"center_x": 0.5}
                    readonly: True
                    on_text: root.toggle_opacity(self)
                    #on_focus:
                        #if self.focus: root.transaction_type_menu.open()
                        #root.show_options()
                        #root.toggle_opacity(self)
                    on_touch_down:
                        root.transaction_type_menu.open() if self.collide_point(*args[1].pos) else None; 
                        root.show_options() if self.collide_point(*args[1].pos) else None; 
                        root.toggle_opacity(self) if self.collide_point(*args[1].pos) else None
                MDTextField:
                    id: transaction_method
                    hint_text: "Transaction Method"
                    helper_text: "Select the transaction Method"
                    helper_text_mode: "on_focus"
                    input_type: "null"
                    input_filter: root.method_filter
                    icon_right: "swap-horizontal"
                    size_hint_x: 0.8
                    pos_hint: {"center_x": 0.5}
                    readonly: True
                    on_text: root.toggle_opacity(self)
                    #on_focus:
                        #if self.focus: root.transaction_method_menu.open()
                        #root.show_options()
                        #root.toggle_opacity(self)
                    on_touch_down:
                        root.transaction_method_menu.open() if self.collide_point(*args[1].pos) else None; 
                        root.show_options() if self.collide_point(*args[1].pos) else None; 
                        root.toggle_opacity(self) if self.collide_point(*args[1].pos) else None  
                MDTextField:
                    id: received_by
                    hint_text: "Received By"
                    helper_text: "Enter Received By"
                    helper_text_mode: "on_focus"
                    icon_right: "account"
                    input_type: "text"
                    input_filter: root.name_filter
                    size_hint_x: 0.8
                    pos_hint: {"center_x": 0.5}
                    on_text: root.toggle_opacity(self)
                    on_focus:
                        root.show_options()
                        root.toggle_opacity(self)